# 按键检测依赖于鼠标移动

# 代码阻塞

## 产生原因

`MOUSEMSG mouseMsg = GetMouseMsg();` 是全阻塞的

意味着如果没有鼠标事件发生，则会持续等待直到鼠标事件发生

## 解决方法

使用 `MouseHit()` 函数来检测是否有鼠标消息可用。如果有消息可用，再使用 `GetMouseMsg()` 获取消息。这将确保程序不会被阻塞。
将`MOUSEMSG mouseMsg = GetMouseMsg();`改为

```cpp
while (MouseHit()) {
	MOUSEMSG mouseMsg = GetMouseMsg();
}
```